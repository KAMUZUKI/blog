{"version":3,"file":"js/407.60d3c967.js","mappings":"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","sources":["webpack://vue3_test/./src/components/Setting/UserManager.vue","webpack://vue3_test/./src/components/Setting/UserManager.vue?4896"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <a-table :columns=\"columns\" :data-source=\"dataSource\" bordered>\r\n      <template #bodyCell=\"{ column, text, record }\">\r\n        <template\r\n          v-if=\"['username', 'phone', 'email', 'status', 'type'].includes(column.dataIndex)\">\r\n          <div>\r\n            <a-input v-if=\"editableData[record.id]\" v-model:value=\"editableData[record.id][column.dataIndex]\"\r\n              style=\"margin: -5px 0\" />\r\n            <template v-else>\r\n              {{ text }}\r\n            </template>\r\n          </div>\r\n        </template>\r\n        <template v-else-if=\"column.dataIndex === 'modify'\">\r\n          <div class=\"editable-row-operations\">\r\n            <span v-if=\"editableData[record.id]\">\r\n              <a-typography-link @click=\"save(record)\">保存</a-typography-link>\r\n              <a-popconfirm title=\"确认取消?\" @confirm=\"cancel(record.id)\">\r\n                <a>取消</a>\r\n              </a-popconfirm>\r\n            </span>\r\n            <span v-else>\r\n              <a @click=\"edit(record.id)\">编辑</a>\r\n            </span>\r\n          </div>\r\n        </template>\r\n        <template v-else-if=\"column.dataIndex === 'delete'\">\r\n          <div class=\"editable-row-operations\">\r\n            <span>\r\n              <a-popconfirm title=\"确认删除?\" ok-text=\"删除\" cancel-text=\"取消\" @confirm=\"deleteById(record.id)\">\r\n                <a>删除</a>\r\n              </a-popconfirm>\r\n            </span>\r\n          </div>\r\n        </template>\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { cloneDeep } from 'lodash-es';\r\nimport { defineComponent, reactive, ref, onMounted } from 'vue';\r\nimport { message } from 'ant-design-vue';\r\nimport axios from 'axios'\r\nimport { useStore } from 'vuex';\r\nexport default defineComponent({\r\n  name: 'UserManager',\r\n  setup() {\r\n    const store=useStore();\r\n    const columns = [{\r\n      title: 'Id',\r\n      width: 15,\r\n      dataIndex: 'id',\r\n    }, {\r\n      title: 'Name',\r\n      width: 25,\r\n      dataIndex: 'username',\r\n    }, {\r\n      title: 'Account',\r\n      dataIndex: 'account',\r\n      width: 35,\r\n    }, {\r\n      title: 'Phone',\r\n      dataIndex: 'phone',\r\n      width: 40,\r\n    }, {\r\n      title: 'Email',\r\n      dataIndex: 'email',\r\n      width: 60,\r\n    }, {\r\n      title: 'CreateTime',\r\n      dataIndex: 'createTime',\r\n      width: 50,\r\n    }, {\r\n      title: 'Status',\r\n      dataIndex: 'status',\r\n      width: 25,\r\n    }, {\r\n      title: '用户类型',\r\n      dataIndex: 'type',\r\n      width: 30,\r\n    }, {\r\n      title: 'Action',\r\n      dataIndex: 'modify',\r\n      width: 25,\r\n    }, {\r\n      title: 'Action',\r\n      dataIndex: 'delete',\r\n      width: 25,\r\n    }];\r\n\r\n    const dataSource = ref([]);\r\n    const listDataTmp = ref([]);\r\n\r\n    const initDataSource = () => {\r\n      //TODO:获取数据\r\n      var params = new URLSearchParams();\r\n      params.append('op', 'getAllUser');\r\n      axios.post(store.state.path+'/info.action', params)\r\n        .then(res => {\r\n          if (res.data.code == 1) {\r\n            listDataTmp.value = res.data.data\r\n            for (const [key, item] of Object.entries(listDataTmp.value)) {\r\n              console.log(key)\r\n              dataSource.value.push(item);\r\n            }\r\n          } else {\r\n            console.log('获取用户信息列表失败');\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    }\r\n\r\n    const editableData = reactive({});\r\n\r\n    const edit = key => {\r\n      editableData[key] = cloneDeep(dataSource.value.filter(item => key === item.id)[0]);\r\n    }\r\n\r\n    const save = user => {\r\n      //TODO:通过userid修改后台用户数据\r\n      Object.assign(dataSource.value.filter(item => user.id === item.id)[0], editableData[user.id]);\r\n      delete editableData[user.id];\r\n    }\r\n\r\n    const cancel = key => {\r\n      delete editableData[key];\r\n    }\r\n\r\n    const deleteById = userId => {\r\n      //TODO:通过userid删除后台用户数据\r\n      var params = new URLSearchParams();\r\n      params.append('op', 'deleteUser');\r\n      params.append('id', userId);\r\n      axios.post('http://localhost:8081/demo/info.action', params)\r\n        .then(res => {\r\n          if (res.data.code == 1) {\r\n            dataSource.value = dataSource.value.filter(item => userId !== item.id);\r\n            message.success('修改用户ID'+userId+'成功');\r\n          } else {\r\n            message.error('修改用户ID'+userId+'失败');\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    }\r\n\r\n    onMounted(() => {\r\n      initDataSource()\r\n    })\r\n\r\n    return {\r\n      dataSource,\r\n      columns,\r\n      editingKey: '',\r\n      editableData,\r\n      edit,\r\n      save,\r\n      cancel,\r\n      deleteById,\r\n    };\r\n  },\r\n});\r\n</script>\r\n<style scoped>\r\n.editable-row-operations a {\r\n  margin-right: 8px;\r\n}\r\n\r\n.container {\r\n  min-width: 1200px;\r\n}\r\n</style>","import { render } from \"./UserManager.vue?vue&type=template&id=044379ea&scoped=true\"\nimport script from \"./UserManager.vue?vue&type=script&lang=js\"\nexport * from \"./UserManager.vue?vue&type=script&lang=js\"\n\nimport \"./UserManager.vue?vue&type=style&index=0&id=044379ea&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\Gitresp\\\\web\\\\vue3_test\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-044379ea\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_a_table","columns","_ctx","bordered","bodyCell","column","text","record","includes","dataIndex","id","_createBlock","_component_a_input","value","style","_Fragment","key","_hoisted_3","_component_a_typography_link","onClick","_component_a_popconfirm","title","onConfirm","_hoisted_5","_hoisted_8","_hoisted_9","defineComponent","name","setup","store","useStore","width","dataSource","ref","listDataTmp","initDataSource","params","URLSearchParams","append","axios","state","path","then","res","data","code","item","Object","entries","console","log","push","catch","error","editableData","reactive","edit","cloneDeep","filter","save","user","assign","cancel","deleteById","userId","message","onMounted","editingKey","__exports__","render"],"sourceRoot":""}