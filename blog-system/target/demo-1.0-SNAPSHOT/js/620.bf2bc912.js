"use strict";(self["webpackChunkvue3_test"]=self["webpackChunkvue3_test"]||[]).push([[620],{5620:function(e,a,t){t.r(a),t.d(a,{default:function(){return g}});var l=t(6252);const n=e=>((0,l.dD)("data-v-33433798"),e=e(),(0,l.Cn)(),e),i={class:"wrap_box"},o=n((()=>(0,l._)("h1",null,"友链管理",-1))),s={class:"flink"},r=n((()=>(0,l._)("h2",{style:{"text-align":"center"}},"添加友链",-1)));function u(e,a,t,n,u,d){const p=(0,l.up)("a-avatar"),m=(0,l.up)("a-card-meta"),c=(0,l.up)("a-card"),f=(0,l.up)("a-popconfirm"),h=(0,l.up)("UserOutlined"),v=(0,l.up)("a-input"),g=(0,l.up)("a-form-item"),w=(0,l.up)("a-textarea"),b=(0,l.up)("a-switch"),_=(0,l.up)("a-button"),k=(0,l.up)("a-form"),W=(0,l.up)("notification-component"),C=(0,l.up)("a-drawer");return(0,l.wg)(),(0,l.iD)("div",i,[o,(0,l._)("div",s,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.flinkList,(a=>((0,l.wg)(),(0,l.j4)(f,{key:a.id,title:"操作","ok-text":"删除","cancel-text":"取消",onConfirm:t=>e.confirm(a.id),onCancel:e.cancel},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{hoverable:"",style:{width:"300px","margin-top":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{title:a.name+(1==a.status?"[已启用]":"[已禁用]"),description:a.description},{avatar:(0,l.w5)((()=>[(0,l.Wm)(p,{src:"http://q1.qlogo.cn/g?b=qq&nk="+a.img+"&s=100"},null,8,["src"])])),_:2},1032,["title","description"])])),_:2},1024)])),_:2},1032,["onConfirm","onCancel"])))),128)),(0,l.Wm)(c,{hoverable:"",style:{width:"300px",height:"97px","margin-top":"20px"},onClick:e.showDrawer},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{title:"添加友链"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 添加友链 ")])),_:1})])),_:1},8,["onClick"]),(0,l.Wm)(C,{title:"添加友链",width:500,visible:e.visible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"},onClose:e.onClose},{default:(0,l.w5)((()=>[(0,l.Wm)(k,(0,l.dG)({ref:"formRef",name:"custom-validation",model:e.formState,rules:e.rules},e.layout,{onFinish:e.handleFinish,onValidate:e.handleValidate,onFinishFailed:e.handleFinishFailed,"validate-messages":e.validateMessages}),{default:(0,l.w5)((()=>[r,(0,l.Wm)(g,{label:"用户名",name:"name",required:""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{value:e.formState.name,"onUpdate:value":a[0]||(a[0]=a=>e.formState.name=a),rules:[{required:!0}]},{prefix:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"site-form-item-icon"})])),_:1},8,["value"])])),_:1}),(0,l.Wm)(g,{name:["img"],label:"邮箱",rules:[{required:!0},{type:"email"}]},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{value:e.formState.img,"onUpdate:value":a[1]||(a[1]=a=>e.formState.img=a)},null,8,["value"])])),_:1}),(0,l.Wm)(g,{name:["url"],label:"网址",rules:[{required:!0}]},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{value:e.formState.url,"onUpdate:value":a[2]||(a[2]=a=>e.formState.url=a)},null,8,["value"])])),_:1}),(0,l.Wm)(g,{name:["description"],label:"简介",rules:[{required:!0}]},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{value:e.formState.description,"onUpdate:value":a[3]||(a[3]=a=>e.formState.description=a)},null,8,["value"])])),_:1}),(0,l.Wm)(g,{name:["status"],label:"是否启用"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{checked:e.formState.status,"onUpdate:checked":a[4]||(a[4]=a=>e.formState.status=a)},null,8,["checked"])])),_:1}),(0,l.Wm)(g,{"wrapper-col":{span:16,offset:6}},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{type:"primary","html-type":"submit"},{default:(0,l.w5)((()=>[(0,l.Uk)("添加")])),_:1}),(0,l.Wm)(_,{style:{"margin-left":"10px"},onClick:e.onClose},{default:(0,l.w5)((()=>[(0,l.Uk)("退出")])),_:1},8,["onClick"])])),_:1})])),_:1},16,["model","rules","onFinish","onValidate","onFinishFailed","validate-messages"]),(0,l.Wm)(W,{ref:"openNotification"},null,512)])),_:1},8,["visible","onClose"])])])}t(7658);var d=t(2262),p=t(1446),m=t(196),c=t(3907),f=(0,l.aZ)({setup(){const e=(0,d.iH)(),a=(0,c.oR)(),t=(0,d.iH)([]),n=(0,d.iH)([]),i=()=>{var e=new URLSearchParams;e.append("op","getAllFlink"),m.ZP.post(a.state.path+"/info.action",e).then((e=>{1==e.data.code?(n.value=e.data.data,n.value.forEach((e=>{t.value.push(e)}))):p.ZP.error("获取友链失败")})).catch((function(e){console.log(e)}))};(0,l.bv)((()=>{i()}));const o=(0,d.iH)({name:"",img:"",url:"",description:"",status:!0}),s=e=>{r(e)},r=e=>{var l=new URLSearchParams;l.append("op","deleteFlinkById"),l.append("id",e),m.ZP.post(a.state.path+"/info.action",l).then((a=>{1==a.data.code?(t.value.pop(e),p.ZP.success("删除成功")):p.ZP.error("删除失败")})).catch((function(e){console.log(e)}))},u=e=>{console.log(e),p.ZP.error("操作取消")},f={required:"${label} 是必要的!",types:{email:"${label} 是无效的邮箱!",number:"${label} 是无效的数字!"}},h=e=>{var l=new URLSearchParams;l.append("op","addFlink"),l.append("name",e.name),l.append("url",e.url),l.append("img",e.img),l.append("description",e.description),l.append("status",1==e.status?1:0),m.ZP.post(a.state.path+"/info.action",l).then((a=>{1==a.data.code?(o.value={name:e.name,url:e.url,img:e.img,description:e.description,status:e.status?1:0},t.value.push(o.value),o.value={name:"",url:"",img:"",description:"",status:!0},p.ZP.success(a.data.msg),W()):(W(),p.ZP.error(a.data.msg))})).catch((function(e){console.log(e)}))},v=e=>{console.log(e)},g=()=>{e.value.resetFields()},w=(...e)=>{console.log(e)},b={labelCol:{span:6},wrapperCol:{span:16}},_=(0,d.iH)(!1),k=()=>{_.value=!0},W=()=>{_.value=!1};return{layout:b,visible:_,flinkList:t,formState:o,validateMessages:f,cancel:u,confirm:s,onClose:W,resetForm:g,showDrawer:k,handleFinish:h,handleValidate:w,handleFinishFailed:v}}}),h=t(3744);const v=(0,h.Z)(f,[["render",u],["__scopeId","data-v-33433798"]]);var g=v}}]);
//# sourceMappingURL=620.bf2bc912.js.map